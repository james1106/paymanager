function upload3(a){a.callBack=function(b){if(b.state!="FAILURE"){$("#picPath").val(b.path);$("#showPic").attr("src",b.url);}else{alert("请上传符合比例的图片!");}};upload2("uploadFileButton",a);}function upload2(a,b){if(!b.fileType){b.fileType="resource";}if(!b.fileSizeLimit){b.fileSizeLimit="140KB";}upload(a,"","",b.fileType,"imageQueueId",b.fileSizeLimit,b.callBack,b);}function upload(f,k,n,o,i,j,c,b){b=b||{};var d="/upload/ajaxUploadifyUploadMobileFile.do?fileType="+o;if(b){if(b.sizeRange){d+="&sizeRange="+b.sizeRange;}if(b.limitWidth&&b.widthCriterion){d+="&limitWidth="+b.limitWidth+"&widthCriterion="+b.widthCriterion;}if(b.limitHeight&&b.heightCriterion){d+="&limitHeight="+b.limitHeight+"&heightCriterion="+b.heightCriterion;}}var h="上传新图片";if(b.buttonText){h=b.buttonText;}var m=80;if(b.width){m=b.width;}var e=25;if(b.height){e=b.height;}var a="支持格式:jpg/gif/jpeg/png/bmp.";if(b.fileTypeDesc){a=b.fileTypeDesc;}var l="*.jpg;*.gif;*.jpeg;*.png;*.bmp";if(b.fileTypeExts){l=b.fileTypeExts;}var g=false;if(b.multi!=null){g=b.multi;}$("#"+f).uploadify({"swf":"/qd_app_static/lib/uploadify/uploadify.swf","uploader":d,"fileObjName":"files","auto":true,"multi":g,"buttonText":h,"width":m,"height":e,"fileSizeLimit":j,"fileTypeDesc":a,"fileTypeExts":l,"overrideEvents":["onSelectError","onDialogClose"],"onUploadStart":function(p){this.addPostParam("fileNames",encodeURI(p.name));},"onSelectError":function(p,r,q){alert("文件大小不能超过"+j);return false;},"onUploadError":function(p,s,r,q){alert("文件上传失败，请重试。");return false;},"onUploadSuccess":function(q,r,p){var s=JSON.parse(r);if(s.url&&s.url!=""){c(s,k,n);}else{alert(s.msg);}}});}